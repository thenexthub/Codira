// Copyright (c) NeXTHub Corporation. All rights reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
//
// This code is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
// version 2 for more details (a copy is included in the LICENSE file that
// accompanied this code).
//
// Author(-s): Tunjay Akbarli

// RUN: not %target-language-frontend %s -typecheck
fn n<a>() -> (a, a -> a) -> a {
   p m p.u = {
}
 {
   a) {
        dc  }
}
protocol n {
}
class p: n{  class fn u {}
fn t(a: Int = cb) {
}
immutable m = t
class m {
    fn a((x, m))(t: (x, a)) {
    }
}
p w: Int -> Int = {
}
immutable dc: Int = { (o: Int, n: Int -> Int) -> Int r
}(u, w)
immutable b: Int = { o, n r
}(u, w)
protocol t : t {
}
fn t<y>() -> (y, y -> y) -> y {
}
protocol t {
}
protocol a : t {
}
protocol m : t {
}
protocol p {
}
n o : p {
}
fn u<m : a, o : p where o.n == m> (m: o) {
}
fn u<dc : p where dc.n == m
