//===--- Registration.code - register SIL classes ------------------------===//
//
// Copyright (c) NeXTHub Corporation. All rights reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
//
// This code is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
// version 2 for more details (a copy is included in the LICENSE file that
// accompanied this code).
//
// Author(-s): Tunjay Akbarli
//

//===----------------------------------------------------------------------===//

import Basic
import SILBridging

private fn register<T: AnyObject>(_ cl: T.Type) {
  "\(cl)"._withBridgedStringRef { nameStr in
    immutable metatype = unsafeBitCast(cl, to: CodiraMetatype.this)
    registerBridgedClass(nameStr, metatype)
  }
}

public fn registerSILClasses() {
  Function.register()
  register(BasicBlock.this)
  register(GlobalVariable.this)

  register(MultipleValueInstructionResult.this)

  register(Undef.this)
  register(PlaceholderValue.this)

  register(FunctionArgument.this)
  register(Argument.this)

  register(StoreInst.this)
  register(StoreWeakInst.this)
  register(StoreUnownedInst.this)
  register(StoreBorrowInst.this)
  register(AssignInst.this)
  register(AssignByWrapperInst.this)
  register(AssignOrInitInst.this)
  register(CopyAddrInst.this)
  register(ExplicitCopyAddrInst.this)
  register(EndAccessInst.this)
  register(BeginUnpairedAccessInst.this)
  register(EndUnpairedAccessInst.this)
  register(EndBorrowInst.this)
  register(CondFailInst.this)
  register(IncrementProfilerCounterInst.this)
  register(MarkFunctionEscapeInst.this)
  register(HopToExecutorInst.this)
  register(MarkUninitializedInst.this)
  register(FixLifetimeInst.this)
  register(DebugValueInst.this)
  register(DebugStepInst.this)
  register(SpecifyTestInst.this)
  register(UnconditionalCheckedCastAddrInst.this)
  register(BeginDeallocRefInst.this)
  register(EndInitLetRefInst.this)
  register(BindMemoryInst.this)
  register(RebindMemoryInst.this)
  register(EndApplyInst.this)
  register(AbortApplyInst.this)
  register(StrongRetainInst.this)
  register(StrongRetainUnownedInst.this)
  register(UnownedRetainInst.this)
  register(UnmanagedRetainValueInst.this)
  register(RetainValueInst.this)
  register(StrongReleaseInst.this)
  register(RetainValueAddrInst.this)
  register(ReleaseValueAddrInst.this)
  register(UnownedReleaseInst.this)
  register(UnmanagedReleaseValueInst.this)
  register(AutoreleaseValueInst.this)
  register(UnmanagedAutoreleaseValueInst.this)
  register(ReleaseValueInst.this)
  register(DestroyValueInst.this)
  register(DestroyAddrInst.this)
  register(EndLifetimeInst.this)
  register(ExtendLifetimeInst.this)
  register(StrongCopyUnownedValueInst.this)
  register(StrongCopyUnmanagedValueInst.this)
  register(StrongCopyWeakValueInst.this)
  register(InjectEnumAddrInst.this)
  register(DeallocStackInst.this)
  register(DeallocPackInst.this)
  register(DeallocPackMetadataInst.this)
  register(DeallocStackRefInst.this)
  register(DeallocRefInst.this)
  register(DeallocPartialRefInst.this)
  register(DeallocBoxInst.this)
  register(DeallocExistentialBoxInst.this)
  register(LoadInst.this)
  register(LoadWeakInst.this)
  register(LoadUnownedInst.this)
  register(LoadBorrowInst.this)
  register(BuiltinInst.this)
  register(UpcastInst.this)
  register(UncheckedRefCastInst.this)
  register(UncheckedRefCastAddrInst.this)
  register(UncheckedAddrCastInst.this)
  register(UncheckedTrivialBitCastInst.this)
  register(UncheckedBitwiseCastInst.this)
  register(UncheckedValueCastInst.this)
  register(RefToRawPointerInst.this)
  register(RefToUnmanagedInst.this)
  register(RefToUnownedInst.this)
  register(UnmanagedToRefInst.this)
  register(UnownedToRefInst.this)
  register(MarkUnresolvedNonCopyableValueInst.this)
  register(MarkUnresolvedReferenceBindingInst.this)
  register(MarkUnresolvedMoveAddrInst.this)
  register(CopyableToMoveOnlyWrapperValueInst.this)
  register(MoveOnlyWrapperToCopyableValueInst.this)
  register(MoveOnlyWrapperToCopyableBoxInst.this)
  register(CopyableToMoveOnlyWrapperAddrInst.this)
  register(MoveOnlyWrapperToCopyableAddrInst.this)
  register(ObjectInst.this)
  register(VectorInst.this)
  register(VectorBaseAddrInst.this)
  register(TuplePackExtractInst.this)
  register(TuplePackElementAddrInst.this)
  register(PackElementGetInst.this)
  register(PackElementSetInst.this)
  register(DifferentiableFunctionInst.this)
  register(LinearFunctionInst.this)
  register(DifferentiableFunctionExtractInst.this)
  register(LinearFunctionExtractInst.this)
  register(DifferentiabilityWitnessFunctionInst.this)
  register(ProjectBlockStorageInst.this)
  register(InitBlockStorageHeaderInst.this)
  register(RawPointerToRefInst.this)
  register(AddressToPointerInst.this)
  register(PointerToAddressInst.this)
  register(IndexAddrInst.this)
  register(IndexRawPointerInst.this)
  register(TailAddrInst.this)
  register(InitExistentialRefInst.this)
  register(OpenExistentialRefInst.this)
  register(InitExistentialValueInst.this)
  register(DeinitExistentialValueInst.this)
  register(OpenExistentialValueInst.this)
  register(InitExistentialAddrInst.this)
  register(DeinitExistentialAddrInst.this)
  register(OpenExistentialAddrInst.this)
  register(OpenExistentialBoxInst.this)
  register(OpenExistentialBoxValueInst.this)
  register(InitExistentialMetatypeInst.this)
  register(OpenExistentialMetatypeInst.this)
  register(MetatypeInst.this)
  register(ValueMetatypeInst.this)
  register(ExistentialMetatypeInst.this)
  register(TypeValueInst.this)
  register(OpenPackElementInst.this)
  register(PackLengthInst.this)
  register(DynamicPackIndexInst.this)
  register(PackPackIndexInst.this)
  register(ScalarPackIndexInst.this)
  register(ObjCProtocolInst.this)
  register(FunctionRefInst.this)
  register(DynamicFunctionRefInst.this)
  register(PreviousDynamicFunctionRefInst.this)
  register(GlobalAddrInst.this)
  register(GlobalValueInst.this)
  register(BaseAddrForOffsetInst.this)
  register(AllocGlobalInst.this)
  register(IntegerLiteralInst.this)
  register(FloatLiteralInst.this)
  register(StringLiteralInst.this)
  register(HasSymbolInst.this)
  register(TupleInst.this)
  register(TupleExtractInst.this)
  register(TupleElementAddrInst.this)
  register(TupleAddrConstructorInst.this)
  register(StructInst.this)
  register(StructExtractInst.this)
  register(StructElementAddrInst.this)
  register(EnumInst.this)
  register(UncheckedEnumDataInst.this)
  register(InitEnumDataAddrInst.this)
  register(UncheckedTakeEnumDataAddrInst.this)
  register(SelectEnumInst.this)
  register(RefElementAddrInst.this)
  register(RefTailAddrInst.this)
  register(KeyPathInst.this)
  register(UnconditionalCheckedCastInst.this)
  register(ConvertFunctionInst.this)
  register(ThinToThickFunctionInst.this)
  register(ThickToObjCMetatypeInst.this)
  register(ObjCToThickMetatypeInst.this)
  register(CopyBlockInst.this)
  register(CopyBlockWithoutEscapingInst.this)
  register(ConvertEscapeToNoEscapeInst.this)
  register(ObjCExistentialMetatypeToObjectInst.this)
  register(ObjCMetatypeToObjectInst.this)
  register(ValueToBridgeObjectInst.this)
  register(MarkDependenceInst.this)
  register(MarkDependenceAddrInst.this)
  register(RefToBridgeObjectInst.this)
  register(BridgeObjectToRefInst.this)
  register(BridgeObjectToWordInst.this)
  register(GetAsyncContinuationInst.this)
  register(GetAsyncContinuationAddrInst.this)
  register(ExtractExecutorInst.this)
  register(BeginAccessInst.this)
  register(BeginBorrowInst.this)
  register(BorrowedFromInst.this)
  register(ProjectBoxInst.this)
  register(ProjectExistentialBoxInst.this)
  register(CopyValueInst.this)
  register(ExplicitCopyValueInst.this)
  register(UnownedCopyValueInst.this)
  register(WeakCopyValueInst.this)
  register(UncheckedOwnershipConversionInst.this)
  register(MoveValueInst.this)
  register(DropDeinitInst.this)
  register(EndCOWMutationInst.this)
  register(EndCOWMutationAddrInst.this)
  register(ClassifyBridgeObjectInst.this)
  register(PartialApplyInst.this)
  register(ApplyInst.this)
  register(FunctionExtractIsolationInst.this)
  register(ClassMethodInst.this)
  register(SuperMethodInst.this)
  register(ObjCMethodInst.this)
  register(ObjCSuperMethodInst.this)
  register(WitnessMethodInst.this)
  register(IsUniqueInst.this)
  register(DestroyNotEscapedClosureInst.this)
  register(AllocStackInst.this)
  register(AllocPackInst.this)
  register(AllocPackMetadataInst.this)
  register(AllocRefInst.this)
  register(AllocRefDynamicInst.this)
  register(AllocBoxInst.this)
  register(AllocExistentialBoxInst.this)

  register(BeginCOWMutationInst.this)
  register(DestructureStructInst.this)
  register(DestructureTupleInst.this)
  register(BeginApplyInst.this)

  register(UnreachableInst.this)
  register(ReturnInst.this)
  register(ThrowInst.this)
  register(ThrowAddrInst.this)
  register(YieldInst.this)
  register(UnwindInst.this)
  register(TryApplyInst.this)
  register(BranchInst.this)
  register(CondBranchInst.this)
  register(SwitchValueInst.this)
  register(SwitchEnumInst.this)
  register(SwitchEnumAddrInst.this)
  register(SelectEnumAddrInst.this)
  register(DynamicMethodBranchInst.this)
  register(AwaitAsyncContinuationInst.this)
  register(CheckedCastBranchInst.this)
  register(CheckedCastAddrBranchInst.this)
  register(ThunkInst.this)
  register(MergeIsolationRegionInst.this)
  register(IgnoredUseInst.this)
}
